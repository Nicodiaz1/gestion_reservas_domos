ESTRUCTURA COMPLETA DEL SISTEMA DE RESERVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

sistema_reservas_domos/
â”‚
â”œâ”€â”€ ğŸ”§ CONFIGURACIÃ“N
â”‚   â”œâ”€â”€ config.py              â†’ ContraseÃ±a admin, precios por defecto
â”‚   â”œâ”€â”€ requirements.txt       â†’ pip install -r requirements.txt
â”‚   â”œâ”€â”€ README.md              â†’ DocumentaciÃ³n completa
â”‚   â”œâ”€â”€ INICIO_RAPIDO.txt      â†’ Pasos para ejecutar
â”‚   â””â”€â”€ ESTRUCTURA.txt         â†’ Este archivo
â”‚
â”œâ”€â”€ ğŸ BACKEND (Python/Flask)
â”‚   â”œâ”€â”€ app.py                 â†’ Servidor principal
â”‚   â”‚   â”œâ”€â”€ Rutas pÃºblicas
â”‚   â”‚   â”‚   â”œâ”€â”€ GET  /                      â†’ PÃ¡gina principal
â”‚   â”‚   â”‚   â”œâ”€â”€ GET  /api/disponibilidad/<id>    â†’ Fechas ocupadas
â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/calcular-precio        â†’ Precio dinÃ¡mico
â”‚   â”‚   â”‚   â””â”€â”€ POST /api/crear-reserva          â†’ Nueva reserva
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Rutas admin
â”‚   â”‚       â”œâ”€â”€ GET  /admin/login          â†’ Login
â”‚   â”‚       â”œâ”€â”€ GET  /admin/dashboard      â†’ Panel de control
â”‚   â”‚       â”œâ”€â”€ GET  /admin/logout         â†’ Logout
â”‚   â”‚       â”œâ”€â”€ GET  /api/admin/reservas   â†’ Ver reservas
â”‚   â”‚       â”œâ”€â”€ GET  /api/admin/domos      â†’ Ver domos
â”‚   â”‚       â”œâ”€â”€ PUT  /api/admin/domo/<id>  â†’ Actualizar precios
â”‚   â”‚       â”œâ”€â”€ DEL  /api/admin/reserva/<id> â†’ Cancelar reserva
â”‚   â”‚       â”œâ”€â”€ GET  /api/admin/feriados   â†’ Ver feriados
â”‚   â”‚       â”œâ”€â”€ POST /api/admin/feriados   â†’ Agregar feriado
â”‚   â”‚       â”œâ”€â”€ DEL  /api/admin/feriado/<id> â†’ Eliminar feriado
â”‚   â”‚       â”œâ”€â”€ GET  /api/admin/descuentos â†’ Ver descuentos
â”‚   â”‚       â””â”€â”€ PUT  /api/admin/descuentos â†’ Actualizar descuentos
â”‚   â”‚
â”‚   â””â”€â”€ models.py              â†’ Modelos SQLAlchemy
â”‚       â”œâ”€â”€ class Domo         â†’ InformaciÃ³n de domos
â”‚       â”œâ”€â”€ class Reserva      â†’ Datos de reservas
â”‚       â”œâ”€â”€ class Feriado      â†’ Fechas especiales
â”‚       â””â”€â”€ class Configuracion â†’ Descuentos y config
â”‚
â”œâ”€â”€ ğŸ¨ FRONTEND (HTML/CSS/JS)
â”‚   â”‚
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ index.html               â†’ PÃ¡gina principal (3 domos)
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar
â”‚   â”‚   â”‚   â”œâ”€â”€ SecciÃ³n para cada domo
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Calendario interactivo
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Formulario de reserva
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Mostrador de precio
â”‚   â”‚   â”‚   â””â”€â”€ Footer
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ admin_login.html         â†’ PÃ¡gina de login
â”‚   â”‚   â”‚   â”œâ”€â”€ Logo
â”‚   â”‚   â”‚   â”œâ”€â”€ Campo contraseÃ±a
â”‚   â”‚   â”‚   â””â”€â”€ BotÃ³n de ingreso
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ admin_dashboard.html     â†’ Panel administrativo
â”‚   â”‚       â”œâ”€â”€ Navbar de tabs
â”‚   â”‚       â”œâ”€â”€ TAB 1: Domos
â”‚   â”‚       â”‚   â””â”€â”€ Editar precios
â”‚   â”‚       â”œâ”€â”€ TAB 2: Descuentos
â”‚   â”‚       â”‚   â””â”€â”€ Configurar por dÃ­as
â”‚   â”‚       â”œâ”€â”€ TAB 3: Feriados
â”‚   â”‚       â”‚   â”œâ”€â”€ Agregar nuevo
â”‚   â”‚       â”‚   â””â”€â”€ Tabla de feriados
â”‚   â”‚       â””â”€â”€ TAB 4: Reservas
â”‚   â”‚           â””â”€â”€ Tabla completa + cancelar
â”‚   â”‚
â”‚   â””â”€â”€ static/
â”‚       â”œâ”€â”€ style.css                â†’ Estilos (9 KB)
â”‚       â”‚   â”œâ”€â”€ Variables globales
â”‚       â”‚   â”œâ”€â”€ Login
â”‚       â”‚   â”œâ”€â”€ Calendario
â”‚       â”‚   â”œâ”€â”€ Formularios
â”‚       â”‚   â”œâ”€â”€ Tabla
â”‚       â”‚   â”œâ”€â”€ Admin
â”‚       â”‚   â””â”€â”€ Responsive (mobile)
â”‚       â”‚
â”‚       â””â”€â”€ script.js                â†’ JavaScript (20 KB)
â”‚           â”œâ”€â”€ CalendarManager
â”‚           â”‚   â”œâ”€â”€ RenderizaciÃ³n
â”‚           â”‚   â”œâ”€â”€ SelecciÃ³n de fechas
â”‚           â”‚   â”œâ”€â”€ CÃ¡lculo de precio
â”‚           â”‚   â””â”€â”€ Carga de disponibilidad
â”‚           â”‚
â”‚           â”œâ”€â”€ Funciones de reserva
â”‚           â”‚   â””â”€â”€ crearReserva()
â”‚           â”‚
â”‚           â””â”€â”€ Funciones admin
â”‚               â”œâ”€â”€ loadAdminReservas()
â”‚               â”œâ”€â”€ loadAdminDomos()
â”‚               â”œâ”€â”€ loadAdminFeriados()
â”‚               â”œâ”€â”€ loadAdminDescuentos()
â”‚               â”œâ”€â”€ actualizarDomo()
â”‚               â”œâ”€â”€ agregarFeriado()
â”‚               â”œâ”€â”€ guardarDescuentos()
â”‚               â””â”€â”€ cancelarReserva()
â”‚
â”œâ”€â”€ ğŸ’¾ BASE DE DATOS (SQLite)
â”‚   â””â”€â”€ domos_reservas.db      â†’ Se crea automÃ¡ticamente
â”‚       â”‚
â”‚       â”œâ”€â”€ Tabla: domos
â”‚       â”‚   â”œâ”€â”€ id (PK)
â”‚       â”‚   â”œâ”€â”€ nombre
â”‚       â”‚   â”œâ”€â”€ descripcion
â”‚       â”‚   â”œâ”€â”€ capacidad
â”‚       â”‚   â”œâ”€â”€ precio_semana
â”‚       â”‚   â””â”€â”€ precio_fin_semana
â”‚       â”‚
â”‚       â”œâ”€â”€ Tabla: reservas
â”‚       â”‚   â”œâ”€â”€ id (PK)
â”‚       â”‚   â”œâ”€â”€ domo_id (FK)
â”‚       â”‚   â”œâ”€â”€ nombre_cliente
â”‚       â”‚   â”œâ”€â”€ email
â”‚       â”‚   â”œâ”€â”€ telefono
â”‚       â”‚   â”œâ”€â”€ fecha_inicio
â”‚       â”‚   â”œâ”€â”€ fecha_fin
â”‚       â”‚   â”œâ”€â”€ cantidad_noches
â”‚       â”‚   â”œâ”€â”€ precio_total
â”‚       â”‚   â”œâ”€â”€ descuento_aplicado
â”‚       â”‚   â”œâ”€â”€ estado
â”‚       â”‚   â””â”€â”€ fecha_creacion
â”‚       â”‚
â”‚       â”œâ”€â”€ Tabla: feriados
â”‚       â”‚   â”œâ”€â”€ id (PK)
â”‚       â”‚   â”œâ”€â”€ fecha (UNIQUE)
â”‚       â”‚   â””â”€â”€ nombre
â”‚       â”‚
â”‚       â””â”€â”€ Tabla: configuracion
â”‚           â”œâ”€â”€ clave (PK)
â”‚           â”œâ”€â”€ valor
â”‚           â””â”€â”€ tipo
â”‚
â””â”€â”€ ğŸ“‹ FLUJO DE DATOS
    â”‚
    â”œâ”€â”€ CLIENTE RESERVANDO:
    â”‚   1. Carga index.html
    â”‚   2. JavaScript carga script.js
    â”‚   3. CalendarManager obtiene /api/disponibilidad/1
    â”‚   4. Usuario selecciona 2 fechas
    â”‚   5. POST /api/calcular-precio â†’ recibe precio
    â”‚   6. Usuario completa formulario
    â”‚   7. POST /api/crear-reserva â†’ se guarda en BD
    â”‚   8. Calendario se actualiza
    â”‚
    â”œâ”€â”€ ADMIN CAMBIANDO PRECIOS:
    â”‚   1. Va a /admin/login
    â”‚   2. Ingresa contraseÃ±a (validaciÃ³n en sesiÃ³n)
    â”‚   3. Carga admin_dashboard.html
    â”‚   4. GET /api/admin/domos â†’ carga precios
    â”‚   5. Admin modifica valores
    â”‚   6. PUT /api/admin/domo/1 â†’ actualiza BD
    â”‚   7. PrÃ³ximas reservas usan nuevos precios
    â”‚
    â””â”€â”€ ADMIN AGREGANDO FERIADO:
        1. Tab "Feriados"
        2. Completa fecha y nombre
        3. POST /api/admin/feriados â†’ se guarda
        4. Calendario ahora marca como fin de semana

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TECNOLOGÃAS:

Backend:
  âœ“ Python 3.7+
  âœ“ Flask 2.3.2 (Framework web)
  âœ“ Flask-SQLAlchemy 3.0.5 (ORM)
  âœ“ SQLite (Base de datos)

Frontend:
  âœ“ HTML5 (Estructura)
  âœ“ CSS3 (Estilos + Responsive)
  âœ“ JavaScript vanilla (Sin librerÃ­as externas)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CÃLCULO DE PRECIOS:

Algoritmo:
  1. Recorre cada noche de la reserva
  2. Para cada noche:
     - Â¿Es feriado? â†’ Precio fin de semana
     - Â¿Es sÃ¡bado/domingo? â†’ Precio fin de semana
     - Sino â†’ Precio semana
  3. Suma todos los precios
  4. Aplica descuento segÃºn cantidad de noches:
     - 2+ noches: -5% (configurable)
     - 3+ noches: -10% (configurable)
     - etc.
  5. Retorna precio final

Ejemplo:
  Domo 1: $100 semana, $150 fin de semana
  Reserva: Lunes 1 a Viernes 5 (4 noches)
  - Lunes: $100
  - Martes: $100
  - MiÃ©rcoles: $100
  - Jueves: $100
  Total sin descuento: $400
  Descuento por 4 noches: -10% = -$40
  Total con descuento: $360

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SEGURIDAD:

âœ“ ContraseÃ±a del admin hasheada en sesiÃ³n
âœ“ CSRF protection en forms (Flask)
âœ“ ValidaciÃ³n de entrada en backend
âœ“ SQLite con prepared statements (SQLAlchemy)
âœ“ No expone contraseÃ±a en cliente

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
